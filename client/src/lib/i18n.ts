interface Translations {
  [key: string]: {
    [key: string]: string;
  };
}

export const translations: Translations = {
  en: {
    // Navigation & General
    'nav.home': 'Home',
    'nav.journey': 'Journey',
    'nav.resources': 'Resources',
    'nav.sessions': 'Group Sessions',
    'nav.notifications': 'Notifications',
    'nav.profile': 'Profile',
    'nav.logout': 'Logout',
    'nav.login': 'Login',
    
    // Landing Page
    'landing.title': 'Begin Your Forgiveness Journey',
    'landing.subtitle': 'Transform pain into healing through our guided 7-step RELEASE methodology',
    'landing.getStarted': 'Get Started',
    'landing.learnMore': 'Learn More',
    
    // Journey Options
    'journey.free.title': 'Free Forgiveness Journey',
    'journey.free.subtitle': 'Self-guided path to healing',
    'journey.free.feature1': 'Complete 7-step RELEASE method',
    'journey.free.feature2': 'Personal journaling prompts',
    'journey.free.feature3': 'Progress tracking',
    'journey.free.feature4': 'Crisis support resources',
    'journey.guided.title': 'Guided Forgiveness Journey',
    'journey.guided.subtitle': 'AI-assisted with professional support',
    'journey.guided.feature1': 'AI emotional companion',
    'journey.guided.feature2': 'Weekly group sessions',
    'journey.guided.feature3': 'Expert facilitator guidance',
    'journey.guided.feature4': 'Personalized insights',
    
    // RELEASE Steps
    'step.recognize': 'Recognize',
    'step.responsibility': 'Responsibility',
    'step.empathy': 'Empathy',
    'step.let_go': 'Let Go',
    'step.experience': 'Experience',
    'step.acknowledge': 'Acknowledge',
    'step.start_over': 'Start Over',
    
    // Session Types
    'session.foundation': 'Forgiveness Foundation Circle',
    'session.meditation': 'Healing Meditation',
    'session.advanced': 'Advanced RELEASE Workshop',
    'session.trauma': 'Trauma-Informed Forgiveness',
    'session.grief': 'Grief Support Circle',
    'session.relationship': 'Relationship Healing',
    'session.workplace': 'Workplace Forgiveness',
    'session.teen': 'Teen Support Circle',
    
    // Notifications
    'notification.session_reminder': 'Session Reminder',
    'notification.progress_milestone': 'Progress Update',
    'notification.session_summary': 'Session Summary',
    'notification.feedback_request': 'Feedback Request',
    'notification.preferences': 'Notification Preferences',
    
    // Feedback
    'feedback.rating': 'How would you rate this session overall?',
    'feedback.comment': 'Share your thoughts',
    'feedback.type': 'What would you like to provide feedback on?',
    'feedback.anonymous': 'Submit feedback anonymously',
    'feedback.submit': 'Submit Feedback',
    'feedback.thanks': 'Thank You for Your Feedback!',
    
    // Common Actions
    'action.save': 'Save',
    'action.cancel': 'Cancel',
    'action.edit': 'Edit',
    'action.delete': 'Delete',
    'action.share': 'Share',
    'action.continue': 'Continue',
    'action.back': 'Back',
    'action.next': 'Next',
    'action.loading': 'Loading...',
    
    // Status Messages
    'status.success': 'Success',
    'status.error': 'Error',
    'status.saved': 'Saved successfully',
    'status.deleted': 'Deleted successfully',
    'status.updated': 'Updated successfully',
  },
  es: {
    // Navigation & General
    'nav.home': 'Inicio',
    'nav.journey': 'Viaje',
    'nav.resources': 'Recursos',
    'nav.sessions': 'Sesiones Grupales',
    'nav.notifications': 'Notificaciones',
    'nav.profile': 'Perfil',
    'nav.logout': 'Cerrar SesiÃ³n',
    'nav.login': 'Iniciar SesiÃ³n',
    
    // Landing Page
    'landing.title': 'Comienza Tu Viaje de PerdÃ³n',
    'landing.subtitle': 'Transforma el dolor en sanaciÃ³n a travÃ©s de nuestra metodologÃ­a guiada de 7 pasos RELEASE',
    'landing.getStarted': 'Comenzar',
    'landing.learnMore': 'Aprende MÃ¡s',
    
    // Journey Options
    'journey.free.title': 'Viaje de PerdÃ³n Gratuito',
    'journey.free.subtitle': 'Camino auto-guiado hacia la sanaciÃ³n',
    'journey.free.feature1': 'MÃ©todo completo de 7 pasos RELEASE',
    'journey.free.feature2': 'Reflexiones de diario personal',
    'journey.free.feature3': 'Seguimiento del progreso',
    'journey.free.feature4': 'Recursos de apoyo en crisis',
    'journey.guided.title': 'Viaje de PerdÃ³n Guiado',
    'journey.guided.subtitle': 'Asistido por IA con apoyo profesional',
    'journey.guided.feature1': 'CompaÃ±ero emocional de IA',
    'journey.guided.feature2': 'Sesiones grupales semanales',
    'journey.guided.feature3': 'OrientaciÃ³n de facilitador experto',
    'journey.guided.feature4': 'Perspectivas personalizadas',
    
    // RELEASE Steps
    'step.recognize': 'Reconocer',
    'step.responsibility': 'Responsabilidad',
    'step.empathy': 'EmpatÃ­a',
    'step.let_go': 'Dejar Ir',
    'step.experience': 'Experimentar',
    'step.acknowledge': 'Reconocer',
    'step.start_over': 'Comenzar de Nuevo',
    
    // Common Actions
    'action.save': 'Guardar',
    'action.cancel': 'Cancelar',
    'action.edit': 'Editar',
    'action.delete': 'Eliminar',
    'action.share': 'Compartir',
    'action.continue': 'Continuar',
    'action.back': 'AtrÃ¡s',
    'action.next': 'Siguiente',
    'action.loading': 'Cargando...',
  },
  fr: {
    // Navigation & General
    'nav.home': 'Accueil',
    'nav.journey': 'Voyage',
    'nav.resources': 'Ressources',
    'nav.sessions': 'Sessions de Groupe',
    'nav.notifications': 'Notifications',
    'nav.profile': 'Profil',
    'nav.logout': 'Se DÃ©connecter',
    'nav.login': 'Se Connecter',
    
    // Landing Page
    'landing.title': 'Commencez Votre Voyage de Pardon',
    'landing.subtitle': 'Transformez la douleur en guÃ©rison grÃ¢ce Ã  notre mÃ©thodologie guidÃ©e en 7 Ã©tapes RELEASE',
    'landing.getStarted': 'Commencer',
    'landing.learnMore': 'En Savoir Plus',
    
    // Journey Options
    'journey.free.title': 'Voyage de Pardon Gratuit',
    'journey.free.subtitle': 'Chemin auto-guidÃ© vers la guÃ©rison',
    'journey.guided.title': 'Voyage de Pardon GuidÃ©',
    'journey.guided.subtitle': 'AssistÃ© par IA avec support professionnel',
    
    // RELEASE Steps
    'step.recognize': 'ReconnaÃ®tre',
    'step.responsibility': 'ResponsabilitÃ©',
    'step.empathy': 'Empathie',
    'step.let_go': 'LÃ¢cher Prise',
    'step.experience': 'ExpÃ©rience',
    'step.acknowledge': 'Accepter',
    'step.start_over': 'Recommencer',
    
    // Common Actions
    'action.save': 'Sauvegarder',
    'action.cancel': 'Annuler',
    'action.edit': 'Modifier',
    'action.delete': 'Supprimer',
    'action.share': 'Partager',
    'action.continue': 'Continuer',
    'action.back': 'Retour',
    'action.next': 'Suivant',
    'action.loading': 'Chargement...',
  }
};

export type Language = 'en' | 'es' | 'fr';

export class I18n {
  private static instance: I18n;
  private currentLanguage: Language = 'en';

  static getInstance(): I18n {
    if (!I18n.instance) {
      I18n.instance = new I18n();
    }
    return I18n.instance;
  }

  setLanguage(language: Language): void {
    this.currentLanguage = language;
    localStorage.setItem('forgiveness-app-language', language);
  }

  getLanguage(): Language {
    if (typeof window !== 'undefined') {
      const stored = localStorage.getItem('forgiveness-app-language') as Language;
      if (stored && translations[stored]) {
        this.currentLanguage = stored;
        return stored;
      }
      
      // Auto-detect browser language
      const browserLang = navigator.language.split('-')[0] as Language;
      if (translations[browserLang]) {
        this.currentLanguage = browserLang;
        return browserLang;
      }
    }
    return this.currentLanguage;
  }

  t(key: string, fallback?: string): string {
    const lang = this.getLanguage();
    const translation = translations[lang]?.[key] || translations.en[key] || fallback || key;
    return translation;
  }

  getAvailableLanguages(): { code: Language; name: string; flag: string }[] {
    return [
      { code: 'en', name: 'English', flag: 'ðŸ‡ºðŸ‡¸' },
      { code: 'es', name: 'EspaÃ±ol', flag: 'ðŸ‡ªðŸ‡¸' },
      { code: 'fr', name: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' }
    ];
  }
}

// Hook for React components
export function useTranslation() {
  const i18n = I18n.getInstance();
  
  return {
    t: (key: string, fallback?: string) => i18n.t(key, fallback),
    setLanguage: (language: Language) => i18n.setLanguage(language),
    currentLanguage: i18n.getLanguage(),
    availableLanguages: i18n.getAvailableLanguages()
  };
}